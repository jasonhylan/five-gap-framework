<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Five Gap Framework</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Load Babel to understand JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- Custom Icons ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const MapPin = (props) => <IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const Layout = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="21" y2="9"/></IconBase>;
        const MessageSquare = (props) => <IconBase {...props}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const Users = (props) => <IconBase {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconBase>;
        const ArrowDown = (props) => <IconBase {...props}><line x1="12" y1="5" x2="12" y2="19"/><polyline points="19 12 12 19 5 12"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></IconBase>;
        const CheckCircle2 = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></IconBase>;
        const Activity = (props) => <IconBase {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></IconBase>;
        const ClipboardList = (props) => <IconBase {...props}><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></IconBase>;
        const Network = (props) => <IconBase {...props}><rect x="16" y="16" width="6" height="6" rx="1"/><rect x="2" y="16" width="6" height="6" rx="1"/><rect x="9" y="2" width="6" height="6" rx="1"/><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"/><path d="M12 12V8"/></IconBase>;
        const XCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></IconBase>;
        const Trophy = (props) => <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></IconBase>;
        const Search = (props) => <IconBase {...props}><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/></IconBase>;
        const Radio = (props) => <IconBase {...props}><circle cx="12" cy="12" r="2"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/></IconBase>;
        const Check = (props) => <IconBase {...props}><polyline points="20 6 9 17 4 12"/></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><polyline points="9 18 15 12 9 6"/></IconBase>;
        const ChevronLeft = (props) => <IconBase {...props}><polyline points="15 18 9 12 15 6"/></IconBase>;

        const gapsData = [
          {
            id: 1,
            name: "Visibility Gap",
            icon: MapPin,
            question: "Can they find you?",
            quote: "I see us when I search, but I'm not sure it's translating into inquiries.",
            blindSpot: `A ranking report gives you a pin. One number, from one location. It says "#2 for divorce attorney near me" and you assume that's the answer. But "near me" changes depending on where "me" is standing. A visibility report gives you a footprint. It shows you the shape of your reach, where you're dominant, where you fade, and where you're completely invisible. Most firms have never seen their footprint. They've only ever seen the pin.`,
            reality: `Your visibility isn't a number. It's a shape. You're likely #1 in a tight circle around your office and invisible a few miles out in every direction. That means qualified prospects in your own market are searching, finding your competitors, and calling them instead. Not because those firms are better. Because those firms are closer to where that person is standing when they search.`,
            chainImpact: "For active searchers, this is the first gate. If they can't find you, nothing else matters. However, other traffic sources (referrals, ads) bypass this gap entirely.",
            diagnostic: "If someone searched 'divorce attorney near me' from neighborhoods near your address, how many of those searches would show you in the top three?",
            fixType: "Quick Fix (Firm Asset)",
            color: "bg-blue-100 text-blue-800 border-blue-300",
            activeColor: "bg-blue-600 text-white"
          },
          {
            id: 2,
            name: "Positioning Gap",
            icon: Layout,
            question: "Do you stand out once they find you?",
            quote: "I look like everyone else",
            blindSpot: `Picking the perfect dark blue hex code and a photo of the local courthouse doesn't make a website stand out. Open five divorce attorney sites in the same city and swap the logos. Nothing feels wrong. That's the problem.`,
            reality: `Every site leads with the same credentials, lists the same practice areas, and uses the same stock imagery. Nothing on the page tells the prospect why they should choose this specific firm instead of the one listed directly below it.`,
            chainImpact: "When a prospect visits 3 websites that look identical, they can't decide. The positioning gap pushes the prospect into the trust gap.",
            diagnostic: "If you removed your headshot and swapped your logo with another divorce attorney's, would a prospect be able to tell the difference?",
            fixType: "Quick Fix (Firm Asset)",
            color: "bg-indigo-100 text-indigo-800 border-indigo-300",
            activeColor: "bg-indigo-600 text-white"
          },
          {
            id: 3,
            name: "Message Gap",
            icon: MessageSquare,
            question: "Does your site make someone in crisis feel understood?",
            quote: "People visit my site but don't call.",
            blindSpot: `Your site has the right information. Practice areas, credentials, experience. But most of it is written from your perspective. "We provide." "We are dedicated to." "Our team has 50 years of combined experience." The person reading it at 2am after the worst conversation of their life isn't looking for a resume. They're looking for a sign that someone gets what they're going through.`,
            reality: `Your site speaks to a rational buyer comparing services. But there is no rational buyer in family law. The person on your site is scared, overwhelmed, and trying to figure out what happens next. If your copy doesn't meet them there, they leave and find someone whose does. Not because that firm is better. Because that firm's site made them feel less alone.`,
            chainImpact: "Even if your positioning is strong and you stand out visually, a site that reads like a brochure confirms their fear that lawyers don't understand what they're going through. The gap between what they're feeling and what your site says is the reason they don't call.",
            diagnostic: "Read your homepage out loud. Does it sound like you're talking to a person going through the worst year of their life, or does it sound like a brochure?",
            fixType: "Quick Fix (Firm Asset)",
            color: "bg-purple-100 text-purple-800 border-purple-300",
            activeColor: "bg-purple-600 text-white"
          },
          {
            id: 4,
            name: "Trust Gap",
            icon: Star,
            question: "Are you externally validated for a decision this big?",
            quote: "I have strong credentials, but prospects still treat every consultation like an interview.",
            blindSpot: `Every attorney on the page has similar badges. Super Lawyers, Avvo, "Best Of" awards. Your prospect doesn't know what they mean, doesn't know if they were earned or purchased, and sees the same row of logos on every site they visit. Badges confirm you're qualified. Reviews are what actually help someone choose you. And only one of those helps you rank on Google.`,
            reality: `One review says "very professional." Another says "I called them the morning my husband moved out, and I didn't feel so alone after that." The first confirms competence. The second makes someone pick up the phone. Most firms have plenty of the first and almost none of the second.`,
            chainImpact: "Your badges speak to other attorneys. Your reviews speak to the person trying to decide who to trust with their kids and their future. When every firm on the page has the same credentials, the one with reviews that tell real stories is the one that gets the call.",
            diagnostic: "Pick any review from your Google profile. Does it give someone a reason to choose you over the attorney listed above and below you?",
            fixType: "Compound/Long-term (External & Internal)",
            color: "bg-pink-100 text-pink-800 border-pink-300",
            activeColor: "bg-pink-600 text-white"
          },
          {
            id: 5,
            name: "Familiarity Gap",
            icon: Users,
            question: "Can they experience working with you before they call?",
            quote: "I'm a stranger when they call",
            blindSpot: `The consultation is not where the relationship starts. By the time someone books, they've already chosen. The consult is a confirmation, not an audition. If there's no video to watch beforehand, you may never make the shortlist.`,
            reality: `The prospect can't hear your voice, see how you explain complicated legal concepts, or get any feel for your empathy. Without video to build a parasocial relationship during their research phase, you are just another name on a list.`,
            chainImpact: "They have to find you first. But once they do, video is the ultimate closer. By using video to show empathy during the research phase, you create a parasocial relationship. The prospect walks into the consult already feeling like they know you.",
            diagnostic: "Can a prospect watch 5 minutes of you speaking, explaining, and showing empathy before they ever pick up the phone?",
            fixType: "High-Impact Asset (Video)",
            color: "bg-rose-100 text-rose-800 border-rose-300",
            activeColor: "bg-rose-600 text-white"
          }
        ];

        // --- NEW: 20-Question ScoreApp Style Assessment ---
        const quizQuestions = [
          // Gap 1: Visibility
          { id: 1, gapId: 1, q: "If someone searched \"divorce attorney near me\" from different neighborhoods across your market, do you know where your firm shows up and where it doesn't?", options: [{ text: "Not really. I see ranking reports, but I've never seen a full geographic picture.", score: 0 }, { text: "I have a sense. We're strong near the office but fade in certain areas.", score: 1 }, { text: "Yes. I know exactly where we show up and where we drop off.", score: 2 }] },
          { id: 2, gapId: 1, q: "Are you relying entirely on referrals and word-of-mouth for new cases?", options: [{ text: "Yes, almost 100%", score: 0 }, { text: "Mostly, but we get some web traffic", score: 1 }, { text: "No, we have predictable, inbound search traffic", score: 2 }] },
          { id: 3, gapId: 1, q: "How wide is your true local search footprint?", options: [{ text: "I don't know", score: 0 }, { text: "Only the immediate area around our office", score: 1 }, { text: "We consistently rank across the entire metro/county", score: 2 }] },
          { id: 4, gapId: 1, q: "When you review your metrics, do you get calls from people who didn't search your specific firm name?", options: [{ text: "Rarely / Never", score: 0 }, { text: "Sometimes", score: 1 }, { text: "Frequently", score: 2 }] },
          // Gap 2: Positioning
          { id: 5, gapId: 2, q: "The Logo Swap Test: If a competitor put their logo on your site and removed your attorney profile pages, would the website still work perfectly for them?", options: [{ text: "Yes, it would basically look and read like their firm", score: 0 }, { text: "Mostly, though a few minor details would be off", score: 1 }, { text: "No, the site's message and feel would make zero sense for them", score: 2 }] },
          { id: 6, gapId: 2, q: "What is the main hero image on your homepage?", options: [{ text: "City skyline, gavel, or scales of justice", score: 0 }, { text: "A generic team photo by a building", score: 1 }, { text: "Custom imagery reflecting our specific client approach", score: 2 }] },
          { id: 7, gapId: 2, q: "What is the dominant color scheme and visual vibe of your website?", options: [{ text: "Navy blue, dark red, or 'lawyer gold'", score: 0 }, { text: "Neutral, safe corporate colors", score: 1 }, { text: "A distinct brand palette that avoids typical legal cliches", score: 2 }] },
          { id: 8, gapId: 2, q: "What makes your firm different?", options: [{ text: "'Our years of experience and dedication'", score: 0 }, { text: "'Our aggressive representation'", score: 1 }, { text: "A highly specific, unique client-centric philosophy", score: 2 }] },
          // Gap 3: Message
          { id: 9, gapId: 3, q: "Does your homepage read like a resume or a lifeline?", options: [{ text: "Mostly a resume of our awards and experience", score: 0 }, { text: "A mix of both", score: 1 }, { text: "A pure lifeline for someone in crisis", score: 2 }] },
          { id: 10, gapId: 3, q: "What pronoun is used most heavily on your homepage?", options: [{ text: "'We / Our / The Firm'", score: 0 }, { text: "An equal mix", score: 1 }, { text: "'You / Your'", score: 2 }] },
          { id: 11, gapId: 3, q: "Does your website specifically name the emotional fears of your clients?", options: [{ text: "No, it just lists legal services", score: 0 }, { text: "A little bit", score: 1 }, { text: "Yes, directly and empathetically", score: 2 }] },
          { id: 12, gapId: 3, q: "If a prospect is panicking at 2 AM, will your website calm them down?", options: [{ text: "Probably not", score: 0 }, { text: "Maybe", score: 1 }, { text: "Absolutely", score: 2 }] },
          // Gap 4: Trust
          { id: 13, gapId: 4, q: "How many Google reviews do you have compared to your closest competitor?", options: [{ text: "Significantly fewer", score: 0 }, { text: "About the same", score: 1 }, { text: "Significantly more", score: 2 }] },
          { id: 14, gapId: 4, q: "What do your typical reviews actually say?", options: [{ text: "'Great lawyer' or 'Very professional'", score: 0 }, { text: "A brief mention of their case outcome", score: 1 }, { text: "Detailed, emotional stories of survival and help", score: 2 }] },
          { id: 15, gapId: 4, q: "Do you display client stories or testimonials natively on your website?", options: [{ text: "No", score: 0 }, { text: "Yes, but buried on a sub-page", score: 1 }, { text: "Yes, front and center", score: 2 }] },
          { id: 16, gapId: 4, q: "If someone reads your reviews, do they feel a connection to past clients?", options: [{ text: "No, they just see a star rating", score: 0 }, { text: "Maybe", score: 1 }, { text: "Yes, they see themselves in those reviews", score: 2 }] },
          // Gap 5: Familiarity
          { id: 17, gapId: 5, q: "How often do prospects feel like they 'already know you' before the consult?", options: [{ text: "Never / Rarely", score: 0 }, { text: "Sometimes", score: 1 }, { text: "Frequently", score: 2 }] },
          { id: 18, gapId: 5, q: "Do you use video on your website to explain your process and show empathy?", options: [{ text: "No video at all", score: 0 }, { text: "One generic firm overview video", score: 1 }, { text: "Yes, multiple targeted videos", score: 2 }] },
          { id: 19, gapId: 5, q: "Does your consultation feel like an audition or a confirmation?", options: [{ text: "A hard audition (I have to sell myself)", score: 0 }, { text: "A mix", score: 1 }, { text: "A confirmation (They just want to know I can take their case)", score: 2 }] },
          { id: 20, gapId: 5, q: "Can a prospect spend 5 minutes 'experiencing' your personality online without calling?", options: [{ text: "No, they just read text", score: 0 }, { text: "Maybe through a blog post", score: 1 }, { text: "Yes, through video or rich media", score: 2 }] }
        ];

        function App() {
          const [activeTab, setActiveTab] = useState('flowchart');
          const [activeGap, setActiveGap] = useState(gapsData[0]);
          
          // --- ScoreApp Quiz State ---
          const [quizStarted, setQuizStarted] = useState(false);
          const [currentQuestionIdx, setCurrentQuestionIdx] = useState(0);
          const [quizAnswers, setQuizAnswers] = useState({});
          const [quizFinished, setQuizFinished] = useState(false);
          
          // --- Lead Capture State ---
          const [showLeadForm, setShowLeadForm] = useState(false);
          const [email, setEmail] = useState('');
          const [isSubmitting, setIsSubmitting] = useState(false);

          const handleAnswer = (qId, score) => {
            const newAnswers = { ...quizAnswers, [qId]: score };
            setQuizAnswers(newAnswers);
            
            // Auto-advance like ScoreApp
            setTimeout(() => {
                if (currentQuestionIdx < quizQuestions.length - 1) {
                    setCurrentQuestionIdx(currentQuestionIdx + 1);
                } else {
                    setShowLeadForm(true); // Trigger lead form instead of immediate results
                }
            }, 300); // 300ms delay feels responsive but natural
          };

          const handleEmailSubmit = (e) => {
            e.preventDefault();
            if (!email) return;
            setIsSubmitting(true);
            
            // Simulate an API call (Here is where you'd send the email + score to your CRM/Zapier)
            setTimeout(() => {
              setIsSubmitting(false);
              setShowLeadForm(false);
              setQuizFinished(true);
            }, 1000);
          };

          const resetQuiz = () => {
              setQuizStarted(false);
              setCurrentQuestionIdx(0);
              setQuizAnswers({});
              setQuizFinished(false);
              setShowLeadForm(false);
              setEmail('');
          };

          const calculateGapScore = (gapId) => {
              let score = 0;
              quizQuestions.filter(q => q.gapId === gapId).forEach(q => {
                  if (quizAnswers[q.id] !== undefined) {
                      score += quizAnswers[q.id];
                  }
              });
              return score; // Max 8 per gap
          };

          const getTotalScorePercentage = () => {
              const totalScore = Object.values(quizAnswers).reduce((a, b) => a + b, 0);
              return Math.round((totalScore / 40) * 100); // 40 is max possible score (20 qs * 2 pts)
          };

          return (
            <div className="min-h-screen bg-slate-50 text-slate-900 font-sans pb-12">
              <header className="bg-slate-900 text-white py-12 px-6">
        <div className="max-w-6xl mx-auto">
          <h1 className="text-4xl font-bold mb-4 tracking-tight">The Five Gap Framework</h1>
          <p className="text-xl text-slate-300 max-w-3xl leading-relaxed">
            A diagnostic framework identifying the five places where a divorce attorney's marketing breaks down 
            between "someone needs a divorce attorney" and "someone calls your firm."
          </p>
        </div>
      </header>

      {/* Navigation */}
      <div className="max-w-6xl mx-auto px-6 mt-8 mb-10">
        <div className="flex flex-wrap justify-center gap-3 md:gap-4">
          <button 
            onClick={() => setActiveTab('flowchart')}
            className={`px-6 py-3 rounded-full text-sm font-bold tracking-wide transition-all duration-200 flex items-center gap-2 
              ${activeTab === 'flowchart' 
                ? 'bg-slate-900 text-white shadow-md scale-105' 
                : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50 hover:border-slate-300 hover:text-slate-900 shadow-sm'}`}
          >
            <Network size={18} />
            Visual Flowchart
          </button>
          
          <button 
            onClick={() => setActiveTab('framework')}
            className={`px-6 py-3 rounded-full text-sm font-bold tracking-wide transition-all duration-200 flex items-center gap-2 
              ${activeTab === 'framework' 
                ? 'bg-slate-900 text-white shadow-md scale-105' 
                : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50 hover:border-slate-300 hover:text-slate-900 shadow-sm'}`}
          >
            <Activity size={18} />
            Interactive Framework
          </button>

          <button 
            onClick={() => setActiveTab('assessment')}
            className={`px-6 py-3 rounded-full text-sm font-bold tracking-wide transition-all duration-200 flex items-center gap-2 
              ${activeTab === 'assessment' 
                ? 'bg-slate-900 text-white shadow-md scale-105' 
                : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50 hover:border-slate-300 hover:text-slate-900 shadow-sm'}`}
          >
            <ClipboardList size={18} />
            Diagnostic Assessment
          </button>
        </div>
      </div>

      <main className="max-w-6xl mx-auto px-6">
        {activeTab === 'flowchart' && (
          <div className="max-w-5xl mx-auto py-8 animate-in fade-in duration-500">
            <div className="text-center mb-12">
              <h2 className="text-3xl font-bold mb-4">The Connected Ecosystem</h2>
              <p className="text-slate-600 max-w-3xl mx-auto text-lg leading-relaxed">
                Your prospects can start anywhere. Google, ads, a referral. But they don't decide there. They decide once they start checking you out. And when they do, everything shows up together. Your map listing, your site, your reviews, your content. That's the ecosystem. And it either works as a whole or it doesn't.
              </p>
            </div>

            <div className="space-y-0 relative">
              
              {/* --- PHASE 1: DISCOVERY & ENTRY --- */}
              <div className="flex justify-center mb-6 relative z-20">
                <div className="bg-slate-800 text-white text-xs font-bold px-4 py-1.5 rounded-full uppercase tracking-wider shadow-sm whitespace-nowrap">
                  Phase 1: The Discovery
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10 mb-8">
                
                {/* Source 1: Search */}
                <div className="flex flex-col items-center h-full w-full">
                  <div className="bg-white border-2 border-slate-200 rounded-2xl p-6 shadow-sm w-full text-center relative z-10">
                    <div className="absolute -top-5 left-1/2 -translate-x-1/2 bg-slate-900 text-white p-2 rounded-full shadow-md">
                      <Search size={20} />
                    </div>
                    <h3 className="font-bold text-lg text-slate-800 mt-2 mb-1">Active Search</h3>
                    <p className="text-sm text-slate-500">Google Map Pack & Organic</p>
                  </div>
                  
                  {/* Gap 1 Box */}
                  <div className="w-[2px] bg-slate-300 h-6"></div>
                  
                  <div className="bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 shadow-sm w-full text-center z-10 relative overflow-hidden">
                    <div className="absolute top-0 right-0 bg-blue-200 text-blue-800 text-xs font-black px-3 py-1 rounded-bl-xl">GAP 1</div>
                    <h4 className="font-bold text-blue-900 flex items-center justify-center gap-2 mb-1 mt-2">
                      <MapPin size={18} /> Visibility
                    </h4>
                    <p className="text-xs font-medium text-blue-700 italic mb-2">A ranking report gives you a pin. Your visibility is a footprint.</p>
                    <div className="text-xs text-left space-y-2 mt-3 bg-white/50 p-3 rounded-xl border border-blue-100">
                      <div className="flex gap-2"><span className="text-red-500 font-bold">X</span><span className="text-slate-700 font-medium">Missing = Lost.</span></div>
                      <div className="flex gap-2"><span className="text-green-600 font-bold">✓</span><span className="text-slate-700 font-medium">Found = Proceeds down.</span></div>
                    </div>
                  </div>
                  
                  {/* Connection to unified funnel */}
                  <div className="flex flex-col items-center flex-grow w-full mt-2">
                     <div className="w-[2px] bg-slate-300 flex-grow min-h-[120px]"></div>
                     <div className="text-slate-400 -mt-1"><ArrowDown size={20} /></div>
                  </div>
                </div>

                {/* Source 2: Direct / Paid */}
                <div className="flex flex-col items-center h-full w-full">
                  <div className="bg-white border-2 border-slate-200 rounded-2xl p-6 shadow-sm w-full text-center relative z-10">
                    <div className="absolute -top-5 left-1/2 -translate-x-1/2 bg-slate-900 text-white p-2 rounded-full shadow-md">
                      <Radio size={20} />
                    </div>
                    <h3 className="font-bold text-lg text-slate-800 mt-2 mb-1">Paid & Direct</h3>
                    <p className="text-sm text-slate-500">Ads, Radio, Billboards</p>
                  </div>
                  
                  {/* Connection to unified funnel */}
                  <div className="flex flex-col items-center flex-grow w-full mt-2 relative">
                     <div className="w-[2px] border-l-2 border-dashed border-slate-300 flex-grow min-h-[180px]"></div>
                     <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-slate-50 text-[10px] md:text-xs leading-tight px-3 py-2 rounded-xl text-slate-500 font-medium border border-slate-200 z-10 text-center shadow-sm w-[90%] md:w-48">Skips the visibility problem, but not the evaluation</div>
                     <div className="text-slate-400 -mt-1"><ArrowDown size={20} /></div>
                  </div>
                </div>

                {/* Source 3: Referrals */}
                <div className="flex flex-col items-center h-full w-full">
                  <div className="bg-white border-2 border-slate-200 rounded-2xl p-6 shadow-sm w-full text-center relative z-10">
                    <div className="absolute -top-5 left-1/2 -translate-x-1/2 bg-slate-900 text-white p-2 rounded-full shadow-md">
                      <Users size={20} />
                    </div>
                    <h3 className="font-bold text-lg text-slate-800 mt-2 mb-1">Referrals</h3>
                    <p className="text-sm text-slate-500">Past clients, other attorneys</p>
                  </div>
                  
                  {/* Connection to unified funnel */}
                  <div className="flex flex-col items-center flex-grow w-full mt-2 relative">
                     <div className="w-[2px] border-l-2 border-dashed border-green-300 flex-grow min-h-[180px]"></div>
                     <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-green-50 text-xs px-3 py-1.5 rounded-full text-green-700 font-bold border border-green-200 shadow-sm flex items-center gap-1 z-10 whitespace-nowrap"><Star size={12}/> Borrowed Trust</div>
                     <div className="text-green-500 -mt-1"><ArrowDown size={20} /></div>
                  </div>
                </div>

              </div>

              {/* --- PHASE 2: THE EVALUATION GAUNTLET --- */}
              <div className="bg-slate-100 rounded-3xl p-6 md:p-8 border border-slate-200 relative shadow-inner mb-0 mt-20">
                <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-slate-800 text-white text-xs font-bold px-4 py-1.5 rounded-full uppercase tracking-wider shadow-sm z-20 whitespace-nowrap">
                  Phase 2: The Evaluation
                </div>
                
                <div className="text-center mb-6 mt-4">
                  <p className="text-slate-600 font-medium">All traffic sources merge here. Your prospects look at your Website and Online Profile concurrently to answer three questions:</p>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                  
                  {/* Gap 2 */}
                  <div className="bg-indigo-50 border-2 border-indigo-200 rounded-2xl p-6 shadow-sm relative overflow-hidden">
                    <div className="absolute top-0 right-0 bg-indigo-200 text-indigo-800 text-xs font-black px-3 py-1 rounded-bl-xl">GAP 2</div>
                    <h4 className="font-bold text-indigo-900 flex items-center gap-2 mb-2 mt-2 text-lg">
                      <Layout size={20} /> Positioning
                    </h4>
                    <p className="text-sm font-medium text-indigo-700 italic mb-3">Your site has your colors, your photos.</p>
                    <p className="text-sm text-slate-700 leading-relaxed">But if a competitor swapped their logo onto it, does it still play? Positioning isn't design. It's deciding who you're for and building everything around that.</p>
                  </div>

                  {/* Gap 3 */}
                  <div className="bg-purple-50 border-2 border-purple-200 rounded-2xl p-6 shadow-sm relative overflow-hidden">
                    <div className="absolute top-0 right-0 bg-purple-200 text-purple-800 text-xs font-black px-3 py-1 rounded-bl-xl">GAP 3</div>
                    <h4 className="font-bold text-purple-900 flex items-center gap-2 mb-2 mt-2 text-lg">
                      <MessageSquare size={20} /> Message
                    </h4>
                    <p className="text-sm font-medium text-purple-700 italic mb-3">Your site explains the process.</p>
                    <p className="text-sm text-slate-700 leading-relaxed">But is there anything on it that makes someone feel like you understand what they're going through, not just the legal side of it?</p>
                  </div>

                  {/* Gap 4 */}
                  <div className="bg-pink-50 border-2 border-pink-200 rounded-2xl p-6 shadow-sm relative overflow-hidden">
                    <div className="absolute top-0 right-0 bg-pink-200 text-pink-800 text-xs font-black px-3 py-1 rounded-bl-xl">GAP 4</div>
                    <h4 className="font-bold text-pink-900 flex items-center gap-2 mb-2 mt-2 text-lg">
                      <Star size={20} /> Trust
                    </h4>
                    <p className="text-sm font-medium text-pink-700 italic mb-3">Your badges confirm you're qualified.</p>
                    <p className="text-sm text-slate-700 leading-relaxed">Your reviews are what actually help someone choose you. And only one of those helps you rank on Google.</p>
                  </div>

                </div>
              </div>


              {/* --- PHASE 3: THE CLOSER --- */}
              <div className="flex flex-col items-center justify-center w-full pt-4">
                <div className="w-[2px] bg-slate-300 h-10"></div>
                <div className="text-slate-400 -mt-1 z-10"><ArrowDown size={20} /></div>

                <div className="bg-rose-900 rounded-3xl p-6 md:p-8 text-white shadow-lg relative border border-rose-800 w-full max-w-4xl mt-10">
                  <div className="absolute inset-0 rounded-3xl overflow-hidden pointer-events-none z-0">
                    <div className="absolute right-0 top-0 opacity-10 transform translate-x-4 -translate-y-4">
                      <Users size={120} />
                    </div>
                  </div>
                  
                  <div className="absolute top-0 right-0 bg-rose-500 text-white text-xs font-black px-4 py-1.5 rounded-bl-2xl rounded-tr-2xl z-20 shadow-sm border-b border-l border-rose-400">
                    GAP 5
                  </div>
                  
                  <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-rose-500 text-white text-xs font-bold px-5 py-1.5 rounded-full uppercase tracking-wider shadow-md z-20 whitespace-nowrap">
                    Phase 3: The Closer
                  </div>
                  
                  <div className="relative z-10 flex flex-col md:flex-row items-center justify-between gap-8 pt-2">
                    <div className="flex-1">
                      <div className="flex flex-wrap items-center gap-3 mb-2">
                        <h3 className="text-2xl font-bold flex items-center gap-2">
                          <Users size={28} className="text-rose-400" />
                          Familiarity (Video)
                        </h3>
                        <span className="flex items-center gap-1.5 bg-pink-500/20 text-pink-200 text-xs font-bold px-2.5 py-1 rounded-md border border-pink-500/30">
                          <Star size={14} className="text-pink-400" /> The Ultimate Trust Signal
                        </span>
                      </div>
                      <p className="text-sm font-medium text-rose-300 italic mb-3">The consultation shouldn't be the first time a prospect hears your voice or sees your face.</p>
                      <p className="text-rose-100/90 leading-relaxed text-sm md:text-base">
                        They evaluated you and stuck around. Now, do they have to read text to guess what you're like, or can they <strong>experience working with you</strong> right now? Engaging video doesn't just build familiarity—it builds a parasocial relationship that supersedes the need for external reviews.
                      </p>
                    </div>
                    <div className="w-full md:w-auto bg-rose-950/50 p-5 rounded-2xl border border-rose-800/50 text-center flex flex-col justify-center min-w-[200px]">
                      <span className="block text-rose-300 text-sm font-bold mb-3">When video closes this gap:</span>
                      <div className="bg-green-500 text-white font-bold py-2.5 px-5 rounded-xl flex items-center justify-center gap-2 shadow-sm">
                        They call ready to hire <ArrowRight size={16} />
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              {/* --- PHASE 4: THE DEFAULT OUTCOME --- */}
              <div className="flex flex-col items-center justify-center w-full">
                <div className="w-[2px] bg-slate-300 h-10 mt-2"></div>
                <div className="text-slate-400 -mt-1 z-10"><ArrowDown size={20} /></div>

                <div className="bg-slate-900 rounded-3xl p-8 text-white text-center shadow-lg w-full max-w-4xl mt-6 relative">
                  <h3 className="text-2xl font-bold mb-2">The Final Decision</h3>
                  <p className="text-slate-400 mb-6 text-sm">When someone looks you up online and doesn't see a clear reason to choose you, they still make a decision. They just make it on the wrong variables.</p>
                  
                  <div className="bg-red-950/40 rounded-2xl p-6 border border-red-900/50">
                    <div className="inline-flex justify-center items-center w-12 h-12 rounded-full bg-red-500/20 text-red-400 mb-4">
                      <XCircle size={24} />
                    </div>
                    <h4 className="font-bold text-lg text-red-400 mb-3">All Evaluative Gaps Open (The Default)</h4>
                    <div className="bg-slate-900 p-5 rounded-xl border border-slate-700 text-sm font-medium text-slate-300 text-left space-y-4">
                      <p>Your prospect defaults to variables completely outside of your brand's value:</p>
                      <ul className="grid grid-cols-1 md:grid-cols-2 gap-4 text-red-300">
                        <li className="flex items-center gap-2"><MapPin size={18}/> Proximity (Closest office)</li>
                        <li className="flex items-center gap-2"><Star size={18}/> Review Volume (Just the number)</li>
                        <li className="flex items-center gap-2"><Activity size={18}/> Speed (Who answered first)</li>
                        <li className="flex items-center gap-2"><Layout size={18}/> Price (Cheapest consult)</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        )}

        {/* --- The Framework Breakdown Tab --- */}
        {activeTab === 'framework' && (
          <div className="space-y-12 animate-in fade-in duration-500">
            
            {/* The Interactive Navigation */}
            <div className="bg-white rounded-3xl shadow-sm border border-slate-200 p-8 md:p-12">
              <div className="text-center mb-10">
                <h2 className="text-2xl font-bold mb-3">The Diagnostic Framework</h2>
                <p className="text-slate-500 max-w-2xl mx-auto">Select a gap in the chain below to view the diagnosis, the blind spots, and the test.</p>
              </div>
              
              <div className="flex flex-col md:flex-row items-center justify-between gap-4 relative max-w-5xl mx-auto">
                <div className="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-slate-100 -translate-y-1/2 z-0"></div>
                
                {gapsData.map((gap, index) => {
                  const Icon = gap.icon;
                  const isActive = activeGap.id === gap.id;
                  
                  return (
                    <div key={gap.id} className="relative z-10 flex flex-col items-center w-full md:w-1/5 group cursor-pointer" onClick={() => setActiveGap(gap)}>
                      <div className={`w-16 h-16 rounded-2xl flex items-center justify-center transition-all duration-300 shadow-sm
                        ${isActive ? gap.activeColor + ' scale-110 shadow-md ring-4 ring-slate-100' : 'bg-white border-2 border-slate-200 text-slate-500 group-hover:border-slate-400 group-hover:text-slate-700'}`}
                      >
                        <Icon size={28} />
                      </div>
                      <div className="mt-4 text-center">
                        <p className={`text-sm font-black uppercase tracking-widest mb-1 ${isActive ? 'text-slate-900' : 'text-slate-400'}`}>GAP {gap.id}</p>
                        <h3 className={`font-bold ${isActive ? 'text-slate-900' : 'text-slate-600'}`}>{gap.name}</h3>
                      </div>
                      {index < gapsData.length - 1 && (
                        <div className="md:hidden my-4 text-slate-300">
                          <ArrowDown size={24} />
                        </div>
                      )}
                    </div>
                  );
                })}
              </div>
            </div>

            {/* The Streamlined Content Area */}
            <div className="max-w-4xl mx-auto">
              <div className="bg-white rounded-3xl shadow-md border border-slate-200 overflow-hidden">
                
                {/* Header Section */}
                <div className={`${activeGap.color.split(' ')[0]} ${activeGap.color.split(' ')[2]} px-8 md:px-12 py-8 border-b text-center relative overflow-hidden`}>
                  <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-5">
                    <activeGap.icon size={200} />
                  </div>
                  <div className="relative z-10 flex flex-col items-center">
                    <span className="inline-flex items-center gap-2 bg-white/60 text-slate-700 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-4 shadow-sm backdrop-blur-sm">
                      Diagnosis {activeGap.id}
                    </span>
                    <h2 className="text-3xl md:text-4xl font-bold text-slate-900 mb-3">{activeGap.name}</h2>
                    <p className="text-xl font-medium text-slate-700 mb-6">"{activeGap.question}"</p>
                    
                    <div className="inline-block bg-white/70 backdrop-blur-md px-6 py-3 rounded-2xl shadow-sm border border-slate-200/50">
                      <p className="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">The Symptom</p>
                      <p className="font-semibold text-slate-900 italic">"{activeGap.quote}"</p>
                    </div>
                  </div>
                </div>

                {/* The Contrast: Blind Spot vs Reality */}
                <div className="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x border-b border-slate-200">
                  {/* Blind Spot */}
                  <div className="p-8 md:p-10 bg-slate-50/50">
                    <h4 className="flex items-center gap-2 text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">
                      <AlertCircle size={18} className="text-slate-400" /> What The Attorney Doesn't Realize
                    </h4>
                    <p className="text-slate-700 leading-relaxed text-lg">{activeGap.blindSpot}</p>
                  </div>
                  
                  {/* Reality */}
                  <div className="p-8 md:p-10">
                    <h4 className="flex items-center gap-2 text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">
                      <Activity size={18} className="text-blue-500" /> What's Actually Happening
                    </h4>
                    <p className="text-slate-800 leading-relaxed text-lg">{activeGap.reality}</p>
                  </div>
                </div>

                {/* The Impact */}
                <div className="p-8 md:p-10 bg-white border-b border-slate-200">
                  <h4 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3 text-center">Why it matters in the ecosystem</h4>
                  <p className="text-slate-700 text-lg leading-relaxed text-center max-w-2xl mx-auto">{activeGap.chainImpact}</p>
                </div>

                {/* The Diagnostic Question (Footer of Card) */}
                <div className="bg-slate-900 p-8 md:p-10 text-center relative overflow-hidden">
                  <div className="relative z-10">
                    <h4 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">The Diagnostic Test</h4>
                    <p className="text-2xl font-medium text-white leading-snug max-w-3xl mx-auto mb-6">"{activeGap.diagnostic}"</p>
                    <div className="inline-flex items-center gap-2 bg-slate-800 border border-slate-700 text-slate-300 text-xs font-bold px-4 py-2 rounded-full uppercase tracking-wide">
                      {activeGap.fixType}
                    </div>
                  </div>
                </div>

              </div>
            </div>

            {/* Global Anchor: The Final Default (Moved outside the card) */}
            <div className="max-w-4xl mx-auto mt-16 relative">
              <div className="flex justify-center mb-6">
                <div className="w-px h-12 bg-slate-300"></div>
              </div>
              <div className="bg-slate-50 border border-slate-200 rounded-3xl p-8 md:p-12 text-center relative overflow-hidden">
                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 via-purple-400 to-rose-400"></div>
                <h3 className="text-sm font-bold text-slate-400 uppercase tracking-widest mb-6">The Final Default Consequence</h3>
                <div className="text-lg md:text-xl text-slate-700 leading-relaxed space-y-4 max-w-3xl mx-auto font-medium">
                  <p>When nothing on your website differentiates you, when nothing builds trust, and when there's no way to get a feel for who you are before calling, your prospect has no reason to choose you over anyone else.</p>
                  <p>So they default. Whoever is closest. Whoever is cheapest. Whoever answers the phone first.</p>
                  <p className="text-slate-900 font-bold text-2xl mt-6">You lose a client you were the right fit for.<br/>And you never know they were looking.</p>
                </div>
              </div>
            </div>

          </div>
        )}

        {/* --- ScoreApp Style Diagnostic Assessment Tab --- */}
        {activeTab === 'assessment' && (
                  <div className="max-w-4xl mx-auto animate-in fade-in duration-500">
                    
                    {/* START SCREEN */}
                    {!quizStarted && !quizFinished && !showLeadForm && (
                      <div className="bg-white rounded-3xl shadow-sm border border-slate-200 p-10 md:p-16 text-center">
                        <div className="inline-flex items-center justify-center w-20 h-20 rounded-full bg-slate-100 text-slate-900 mb-6">
                          <ClipboardList size={40} />
                        </div>
                        <h2 className="text-4xl font-bold mb-4 text-slate-900">The 5-Gap Marketing Audit</h2>
                        <p className="text-xl text-slate-600 mb-8 max-w-2xl mx-auto leading-relaxed">
                          Take this 2-minute, 20-question audit to discover exactly where your firm is leaking high-value cases to your competitors.
                        </p>
                        <div className="space-y-4 mb-10 max-w-md mx-auto text-left">
                          <div className="flex items-center gap-3 text-slate-700 font-medium bg-slate-50 p-3 rounded-xl border border-slate-100"><Check className="text-green-500" size={20}/> Uncover your specific blind spots</div>
                          <div className="flex items-center gap-3 text-slate-700 font-medium bg-slate-50 p-3 rounded-xl border border-slate-100"><Check className="text-green-500" size={20}/> Get a personalized marketing health score</div>
                          <div className="flex items-center gap-3 text-slate-700 font-medium bg-slate-50 p-3 rounded-xl border border-slate-100"><Check className="text-green-500" size={20}/> See which gaps to fix first</div>
                        </div>
                        <button 
                          onClick={() => setQuizStarted(true)}
                          className="bg-slate-900 text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-slate-800 transition-all hover:scale-105 active:scale-95 shadow-lg flex items-center gap-2 mx-auto"
                        >
                          Start The Audit <ChevronRight size={20} />
                        </button>
                      </div>
                    )}

                    {/* QUESTION SCREEN */}
                    {quizStarted && !showLeadForm && !quizFinished && (
                      <div className="bg-white rounded-3xl shadow-sm border border-slate-200 p-8 md:p-12">
                        {/* Progress Bar & Navigation */}
                        <div className="mb-8">
                          <div className="flex items-center justify-between mb-4">
                            {currentQuestionIdx > 0 ? (
                              <button 
                                onClick={() => setCurrentQuestionIdx(prev => prev - 1)}
                                className="flex items-center gap-1 text-slate-500 hover:text-slate-900 font-bold text-sm transition-colors uppercase tracking-wider"
                              >
                                <ChevronLeft size={18} /> Back
                              </button>
                            ) : (
                              <div className="w-[72px]"></div> /* Placeholder to keep centering balanced */
                            )}
                            <span className="text-sm font-bold text-slate-400 uppercase tracking-wider">
                              Question {currentQuestionIdx + 1} of 20
                            </span>
                            <span className="text-sm font-bold text-slate-400 uppercase tracking-wider w-[72px] text-right">
                              {Math.round(((currentQuestionIdx) / 20) * 100)}%
                            </span>
                          </div>
                          <div className="w-full bg-slate-100 h-2.5 rounded-full overflow-hidden">
                            <div 
                              className="bg-slate-900 h-full rounded-full transition-all duration-500 ease-out"
                              style={{ width: `${((currentQuestionIdx) / 20) * 100}%` }}
                            ></div>
                          </div>
                        </div>

                        {/* Question Content */}
                        <div className="mb-10 min-h-[120px] flex items-center">
                          <h3 className="text-2xl md:text-3xl font-bold text-slate-900 leading-snug">
                            {quizQuestions[currentQuestionIdx].q}
                          </h3>
                        </div>

                        {/* Options */}
                        <div className="space-y-3">
                          {quizQuestions[currentQuestionIdx].options.map((option, idx) => {
                            const isSelected = quizAnswers[quizQuestions[currentQuestionIdx].id] === option.score;
                            return (
                              <button
                                key={idx}
                                onClick={() => handleAnswer(quizQuestions[currentQuestionIdx].id, option.score)}
                                className={`w-full text-left p-5 rounded-2xl border-2 transition-all duration-200 flex items-center gap-4 group
                                  ${isSelected 
                                    ? 'border-slate-900 bg-slate-50 ring-4 ring-slate-100' 
                                    : 'border-slate-200 hover:border-slate-400 hover:bg-slate-50'
                                  }`}
                              >
                                <div className={`w-6 h-6 rounded-full border-2 flex-shrink-0 flex items-center justify-center transition-colors
                                  ${isSelected ? 'border-slate-900 bg-slate-900' : 'border-slate-300 group-hover:border-slate-500'}`}
                                >
                                  {isSelected && <div className="w-2 h-2 bg-white rounded-full"></div>}
                                </div>
                                <span className={`text-lg font-medium ${isSelected ? 'text-slate-900' : 'text-slate-700'}`}>
                                  {option.text}
                                </span>
                              </button>
                            );
                          })}
                        </div>
                      </div>
                    )}

                    {/* LEAD CAPTURE SCREEN */}
                    {showLeadForm && !quizFinished && (
                      <div className="bg-white rounded-3xl shadow-sm border border-slate-200 p-10 md:p-16 text-center max-w-2xl mx-auto animate-in fade-in zoom-in-95 duration-500">
                        <div className="inline-flex items-center justify-center w-20 h-20 rounded-full bg-blue-50 text-blue-600 mb-6 shadow-inner">
                          <ClipboardList size={32} />
                        </div>
                        <h2 className="text-3xl md:text-4xl font-bold mb-4 text-slate-900 tracking-tight">Your Audit is Ready.</h2>
                        <p className="text-lg text-slate-600 mb-8 leading-relaxed">
                          Enter your email below to unlock your personalized Marketing Health Score and get the full 5-Gap diagnostic breakdown sent straight to your inbox.
                        </p>
                        
                        <form onSubmit={handleEmailSubmit} className="space-y-4 max-w-sm mx-auto">
                          <input 
                            type="email" 
                            required 
                            placeholder="Enter your email address" 
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            className="w-full px-5 py-4 rounded-xl border-2 border-slate-200 focus:border-blue-500 focus:ring-0 text-lg outline-none transition-colors text-center"
                          />
                          <button 
                            type="submit" 
                            disabled={isSubmitting}
                            className="w-full bg-blue-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-70 shadow-md"
                          >
                            {isSubmitting ? 'Generating Report...' : 'Reveal My Score'} <ArrowRight size={20} />
                          </button>
                        </form>
                        
                        <button 
                          onClick={() => { setShowLeadForm(false); setQuizFinished(true); }}
                          className="mt-8 text-sm text-slate-400 hover:text-slate-600 font-medium transition-colors underline underline-offset-4"
                        >
                          Skip and view results now
                        </button>
                      </div>
                    )}

                    {/* RESULTS DASHBOARD */}
                    {quizFinished && (
                      <div className="space-y-8 animate-in slide-in-from-bottom-8 duration-700">
                        
                        {/* Master Score Banner */}
                        <div className="bg-slate-900 rounded-3xl p-10 text-center relative overflow-hidden text-white shadow-xl">
                          <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-400 via-purple-400 to-rose-400"></div>
                          <h2 className="text-3xl font-bold mb-2">Your Marketing Health Score</h2>
                          <p className="text-slate-400 mb-8 text-lg">Based on your 5-Gap Framework analysis</p>
                          
                          <div className="inline-flex items-center justify-center w-40 h-40 rounded-full border-8 border-slate-800 relative mb-4">
                            <svg className="absolute inset-0 w-full h-full transform -rotate-90" viewBox="0 0 100 100">
                              <circle 
                                cx="50" cy="50" r="46" fill="transparent" stroke="currentColor" 
                                strokeWidth="8" className="text-slate-800"
                              />
                              <circle 
                                cx="50" cy="50" r="46" fill="transparent" stroke="currentColor" 
                                strokeWidth="8" className={getTotalScorePercentage() >= 70 ? 'text-green-500' : getTotalScorePercentage() >= 40 ? 'text-yellow-500' : 'text-red-500'}
                                strokeDasharray={`${getTotalScorePercentage() * 2.89} 289`}
                                strokeLinecap="round"
                              />
                            </svg>
                            <span className="text-5xl font-black">{getTotalScorePercentage()}%</span>
                          </div>
                          
                          <p className="text-xl font-medium mt-4 max-w-2xl mx-auto">
                            {getTotalScorePercentage() >= 70 ? "Your foundation is solid, but closing the remaining gaps will accelerate growth." : 
                             getTotalScorePercentage() >= 40 ? "You have significant leaks in your chain. You are losing cases to inferior attorneys." : 
                             "Critical condition. Your marketing is acting as a wall, actively preventing ideal clients from choosing you."}
                          </p>
                        </div>

                        {/* Detailed Gap Breakdown */}
                        <div className="bg-white rounded-3xl shadow-sm border border-slate-200 p-8 md:p-10">
                          <h3 className="text-2xl font-bold mb-8 text-slate-900 text-center">Gap-by-Gap Breakdown</h3>
                          
                          <div className="space-y-6">
                            {gapsData.map((gap) => {
                              const score = calculateGapScore(gap.id);
                              // 0-4 points = Open/Red, 5-6 points = Partial/Yellow, 7-8 points = Closed/Green
                              const status = score >= 7 ? 'Closed' : score >= 5 ? 'Partial Leak' : 'Open (Critical)';
                              const statusColor = score >= 7 ? 'text-green-600 bg-green-50 border-green-200' : 
                                                  score >= 5 ? 'text-yellow-700 bg-yellow-50 border-yellow-200' : 
                                                  'text-red-700 bg-red-50 border-red-200';
                              const barColor = score >= 7 ? 'bg-green-500' : score >= 5 ? 'bg-yellow-500' : 'bg-red-500';

                              return (
                                <div key={gap.id} className={`p-6 rounded-2xl border-2 flex flex-col md:flex-row gap-6 items-start md:items-center ${statusColor}`}>
                                  <div className="flex-shrink-0 bg-white p-3 rounded-xl shadow-sm">
                                    <gap.icon size={28} className={score >= 7 ? 'text-green-600' : score >= 5 ? 'text-yellow-600' : 'text-red-600'} />
                                  </div>
                                  
                                  <div className="flex-grow w-full">
                                    <div className="flex justify-between items-end mb-2">
                                      <h4 className="font-bold text-lg">{gap.name}</h4>
                                      <span className="font-bold text-sm uppercase tracking-wider">{status}</span>
                                    </div>
                                    <div className="w-full bg-white/50 h-3 rounded-full overflow-hidden border border-black/5">
                                      <div className={`${barColor} h-full rounded-full`} style={{ width: `${(score / 8) * 100}%` }}></div>
                                    </div>
                                    <p className="mt-3 text-sm font-medium opacity-90">
                                      {score >= 7 ? "Strong performance. This gap is not costing you clients." : 
                                       score >= 5 ? "You are surviving here, but a competitor could easily steal market share by doing this slightly better." : 
                                       `Fix this immediately. ${gap.reality}`}
                                    </p>
                                  </div>
                                </div>
                              )
                            })}
                          </div>
                          
                          <div className="mt-10 text-center">
                            <button 
                              onClick={resetQuiz}
                              className="text-slate-500 font-bold hover:text-slate-900 transition-colors uppercase tracking-wider text-sm"
                            >
                              Retake Assessment
                            </button>
                          </div>
                        </div>

                      </div>
                    )}
                  </div>
                )}
              </main>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
